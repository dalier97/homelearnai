
   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_can_log_security_events(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_handles_null_values_gracefully(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_handles_database_errors_without_failing(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_can_retrieve_user_audit_logs(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_can_count_recent_failed_attempts(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_can_count_failed_attempts_by_ip(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_handles_query_errors_gracefully(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_validates_time_ranges_for_failed_attempts(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeAuditLogTest::it_properly_encodes_metadata(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_applies_security_headers_when_kids_mode_is_active(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_does_not_apply_security_headers_when_kids_mode_is_inactive(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_applies_restrictive_csp_policy(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_applies_restrictive_permissions_policy(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_disables_caching_for_sensitive_pages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_does_not_disable_caching_for_non_sensitive_pages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_does_not_set_hsts_header_on_http(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_identifies_sensitive_kids_mode_pages_correctly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_builds_csp_with_proper_syntax(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\KidsModeSecurityHeadersTest::it_builds_permissions_policy_with_proper_syntax(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::parent_dashboard_shows_pin_status_and_enter_kids_mode_buttons(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::parent_dashboard_shows_set_pin_first_when_pin_not_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::can_enter_kids_mode_when_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::cannot_enter_kids_mode_for_non_existent_child(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::cannot_enter_kids_mode_for_other_users_child(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::kids_mode_enter_returns_json_for_ajax_requests(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::kids_mode_indicator_shows_when_active(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::kids_mode_indicator_hidden_when_not_active(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::navigation_is_restricted_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::can_exit_kids_mode_with_valid_pin(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::cannot_exit_kids_mode_with_invalid_pin(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::pin_exit_screen_shows_correct_content(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::cannot_access_parent_only_routes_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeEnterExitTest::can_access_allowed_routes_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_can_complete_full_kids_mode_workflow(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_enforces_rate_limiting_on_pin_attempts(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_validates_session_fingerprinting(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_applies_security_headers_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_blocks_unauthorized_routes_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_allows_safe_routes_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_logs_security_events_properly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_handles_pin_reset_correctly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_validates_pin_format_correctly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_handles_session_state_transitions_correctly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeIntegrationTest::it_provides_proper_error_messages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_displays_pin_settings_page_correctly_when_no_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_displays_pin_settings_page_correctly_when_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_can_set_new_pin_with_valid_data(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_validates_pin_format_correctly(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_validates_pin_confirmation_match(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_can_reset_existing_pin(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_displays_exit_screen_correctly_when_no_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_displays_exit_screen_with_pin_entry_when_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_displays_lockout_message_when_account_is_locked(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_shows_attempts_remaining_when_there_are_failed_attempts(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_redirects_when_kids_mode_is_not_active_on_exit_screen(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_validates_pin_submission_format(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_requires_authentication_for_pin_operations(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::it_blocks_pin_settings_access_when_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::pin_settings_form_includes_required_elements(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModePinUITest::exit_screen_includes_required_elements_when_pin_is_set(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_logs_kids_mode_entry_with_security_details(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_validates_session_fingerprint_on_pin_validation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_blocks_request_with_invalid_session_fingerprint(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_implements_progressive_lockout_for_failed_pin_attempts(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_implements_ip_based_rate_limiting(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_applies_security_headers_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_does_not_apply_security_headers_when_not_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_tracks_audit_logs_for_security_events(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_clears_rate_limiting_on_successful_pin_validation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_prevents_access_when_not_in_kids_mode(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\KidsModeSecurityTest::it_validates_pin_format(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   FAIL  Tests\Unit\KidsModeAuditLogTest
  â¨¯ it can log security events                                           0.28s  
  â¨¯ it handles null values gracefully                                    0.01s  
  â¨¯ it handles database errors without failing                           0.01s  
  â¨¯ it can retrieve user audit logs                                      0.01s  
  â¨¯ it can count recent failed attempts                                  0.01s  
  â¨¯ it can count failed attempts by ip                                   0.01s  
  â¨¯ it handles query errors gracefully                                   0.01s  
  â¨¯ it validates time ranges for failed attempts                         0.01s  
  â¨¯ it properly encodes metadata                                         0.01s  

   PASS  Tests\Unit\KidsModeMiddlewareUnitTest
  âœ“ kids mode middleware passes when not active                          0.07s  
  âœ“ kids mode middleware allows child today route                        0.02s  
  âœ“ kids mode middleware allows exit routes                              0.01s  
  âœ“ kids mode middleware blocks dashboard parent                         0.01s  
  âœ“ kids mode middleware blocks planning routes                          0.01s  
  âœ“ kids mode middleware blocks children routes                          0.01s  
  âœ“ kids mode middleware blocks create routes                            0.01s  
  âœ“ kids mode middleware allows static assets                            0.01s  
  âœ“ kids mode middleware allows api routes                               0.01s  
  âœ“ kids mode middleware handles htmx requests                           0.01s  
  âœ“ not in kids mode middleware passes when not active                   0.01s  
  âœ“ not in kids mode middleware blocks when active                       0.01s  
  âœ“ not in kids mode middleware handles htmx when blocked                0.01s  

   PASS  Tests\Unit\KidsModeSecurityHeadersTest
  âœ“ it applies security headers when kids mode is active                 0.08s  
  âœ“ it does not apply security headers when kids mode is inactive        0.01s  
  âœ“ it applies restrictive csp policy                                    0.01s  
  âœ“ it applies restrictive permissions policy                            0.01s  
  âœ“ it disables caching for sensitive pages                              0.01s  
  âœ“ it does not disable caching for non sensitive pages                  0.01s  
  âœ“ it does not set hsts header on http                                  0.01s  
  âœ“ it identifies sensitive kids mode pages correctly                    0.01s  
  âœ“ it builds csp with proper syntax                                     0.01s  
  âœ“ it builds permissions policy with proper syntax                      0.01s  

   PASS  Tests\Unit\KidsModeSecurityTest
  âœ“ example                                                              0.06s  

   PASS  Tests\Feature\KidsModeControllerTest
  âœ“ enter kids mode validates child ownership                            0.02s  
  âœ“ session data is properly managed                                     0.01s  
  âœ“ pin validation rules                                                 0.08s  
  âœ“ exit pin validation rules                                            0.02s  
  âœ“ kids mode requires active session                                    0.01s  
  âœ“ authentication middleware is applied                                 0.06s  
  âœ“ password hashing works correctly                                     0.77s  
  âœ“ rate limiting key format                                             0.01s  
  âœ“ pin security requirements                                            0.01s  
  âœ“ lockout time calculation                                             0.01s  
  âœ“ controller dependencies are injected                                 0.01s  
  âœ“ routes are properly defined                                          0.06s  

   FAIL  Tests\Feature\KidsModeEnterExitTest
  â¨¯ parent dashboard shows pin status and enter kids mode buttons
  â¨¯ parent dashboard shows set pin first when pin not set
  â¨¯ can enter kids mode when pin is set
  â¨¯ cannot enter kids mode for non existent child
  â¨¯ cannot enter kids mode for other users child
  â¨¯ kids mode enter returns json for ajax requests
  â¨¯ kids mode indicator shows when active
  â¨¯ kids mode indicator hidden when not active
  â¨¯ navigation is restricted in kids mode
  â¨¯ can exit kids mode with valid pin
  â¨¯ cannot exit kids mode with invalid pin
  â¨¯ pin exit screen shows correct content
  â¨¯ cannot access parent only routes in kids mode
  â¨¯ can access allowed routes in kids mode

   FAIL  Tests\Feature\KidsModeIntegrationTest
  âœ“ it can complete full kids mode workflow                              0.28s  
  â¨¯ it enforces rate limiting on pin attempts                            0.28s  
  âœ“ it validates session fingerprinting                                  0.02s  
  âœ“ it applies security headers in kids mode                             0.02s  
  âœ“ it blocks unauthorized routes in kids mode                           0.03s  
  â¨¯ it allows safe routes in kids mode                                   0.02s  
  â¨¯ it logs security events properly                                     0.03s  
  âœ“ it handles pin reset correctly                                       0.27s  
  âœ“ it validates pin format correctly                                    0.29s  
  âœ“ it handles session state transitions correctly                       0.03s  
  â¨¯ it provides proper error messages                                    0.02s  

   FAIL  Tests\Feature\KidsModeMiddlewareTest
  âœ“ kids mode middleware allows access when not in kids mode             0.01s  
  âœ“ kids mode middleware allows child today view                         0.01s  
  âœ“ kids mode middleware allows kids mode exit routes                    0.01s  
  â¨¯ kids mode middleware blocks parent only routes                       0.01s  
  â¨¯ kids mode middleware handles htmx requests                           0.01s  
  âœ“ kids mode middleware allows static assets                            0.01s  
  âœ“ kids mode middleware allows api routes                               0.01s  
  âœ“ not in kids mode middleware allows access when not in kids mode      0.01s  
  âœ“ not in kids mode middleware blocks access when in kids mode          0.01s  
  âœ“ not in kids mode middleware handles htmx requests when blocked       0.01s  
  â¨¯ kids mode middleware blocks routes with action keywords              0.01s  
  âœ“ kids mode middleware allows review completion                        0.01s  
  â¨¯ kids mode middleware blocks specific parent routes                   0.01s  
  âœ“ middleware logs access attempts                                      0.01s  
  âœ“ middleware works without kids mode session                           0.01s  

   PASS  Tests\Feature\KidsModePinMigrationTest
  âœ“ kids mode pin migration adds required fields                         0.11s  
  âœ“ kids mode pin fields have correct properties                         0.03s  
  âœ“ can insert kids mode pin data                                        0.03s  
  âœ“ kids mode pin fields can be null                                     0.03s  
  âœ“ kids mode pin attempts defaults to zero                              0.02s  
  âœ“ can manage kids mode pin fields                                      0.03s  
  âœ“ pin validation workflow                                              0.28s  

   PASS  Tests\Feature\KidsModePinUISimpleTest
  âœ“ pin settings route is accessible                                     0.02s  
  âœ“ pin settings requires authentication                                 0.02s  
  âœ“ kids mode settings link appears in navigation                        0.04s  
  âœ“ pin update validates pin format                                      0.01s  
  âœ“ pin update validates pin confirmation match                          0.02s  
  âœ“ pin update requires 4 digit pin                                      0.01s  
  âœ“ exit screen requires kids mode active                                0.01s  
  âœ“ exit pin validation requires kids mode active                        0.01s  
  âœ“ exit pin validation validates pin format                             0.02s  
  âœ“ exit pin validation requires 4 digits                                0.01s  
  âœ“ pin settings blocked in kids mode                                    0.01s  
  âœ“ pin update blocked in kids mode                                      0.01s  
  âœ“ pin reset blocked in kids mode                                       0.01s  
  âœ“ all required translations exist                                      0.01s  
  âœ“ routes exist and are named correctly                                 0.01s  

   FAIL  Tests\Feature\KidsModePinUITest
  â¨¯ it displays pin settings page correctly when no pin is set           0.28s  
  â¨¯ it displays pin settings page correctly when pin is set              0.12s  
  â¨¯ it can set new pin with valid data                                   0.10s  
  âœ“ it validates pin format correctly                                    0.01s  
  âœ“ it validates pin confirmation match                                  0.01s  
  â¨¯ it can reset existing pin                                            0.10s  
  â¨¯ it displays exit screen correctly when no pin is set                 0.01s  
  â¨¯ it displays exit screen with pin entry when pin is set               0.01s  
  â¨¯ it displays lockout message when account is locked                   0.01s  
  â¨¯ it shows attempts remaining when there are failed attempts           0.01s  
  âœ“ it redirects when kids mode is not active on exit screen             0.01s  
  â¨¯ it validates pin submission format                                   0.01s  
  â¨¯ it requires authentication for pin operations                        0.02s  
  âœ“ it blocks pin settings access when in kids mode                      0.01s  
  â¨¯ pin settings form includes required elements                         0.12s  
  â¨¯ exit screen includes required elements when pin is set               0.01s  

   FAIL  Tests\Feature\KidsModeSecurityTest
  â¨¯ it logs kids mode entry with security details
  â¨¯ it validates session fingerprint on pin validation
  â¨¯ it blocks request with invalid session fingerprint
  â¨¯ it implements progressive lockout for failed pin attempts
  â¨¯ it implements ip based rate limiting
  â¨¯ it applies security headers in kids mode
  â¨¯ it does not apply security headers when not in kids mode
  â¨¯ it tracks audit logs for security events
  â¨¯ it clears rate limiting on successful pin validation
  â¨¯ it prevents access when not in kids mode
  â¨¯ it validates pin format

   FAIL  Tests\Feature\KidsModeUITest
  â¨¯ child today view renders without kids mode                           0.03s  
  âœ“ kids mode session variables work                                     0.01s  
  â¨¯ kids mode indicator renders when active                              0.01s  
  âœ“ kids mode indicator hidden when inactive                             0.01s  
  âœ“ child today view template exists                                     0.01s  
  âœ“ review card partial exists                                           0.01s  
  â¨¯ kids mode css classes are applied                                    0.01s  
  â¨¯ regular mode css classes are applied                                 0.01s  
  âœ“ kids mode javascript variables are set correctly                     0.01s  
  âœ“ regular mode javascript variables are set correctly                  0.01s  
  âœ“ review card renders kids mode styling                                0.01s  
  âœ“ confetti animation css is included                                   0.01s  
  âœ“ complex features are hidden in kids mode                             0.01s  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it can log securityâ€¦   TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:59
     55â–•                 'created_at' => now()->toISOString(),
     56â–•                 'updated_at' => now()->toISOString()
     57â–•             ];
     58â–• 
  âžœ  59â–•             $supabase->from('kids_mode_audit_logs')->insert($logData);
     60â–•             
     61â–•             Log::info('Kids mode audit log created', [
     62â–•                 'action' => $action,
     63â–•                 'user_id' => $userId,

  1   app/Models/KidsModeAuditLog.php:59
  2   tests/Unit/KidsModeAuditLogTest.php:50

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it handles null valuâ€¦  TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:59
     55â–•                 'created_at' => now()->toISOString(),
     56â–•                 'updated_at' => now()->toISOString()
     57â–•             ];
     58â–• 
  âžœ  59â–•             $supabase->from('kids_mode_audit_logs')->insert($logData);
     60â–•             
     61â–•             Log::info('Kids mode audit log created', [
     62â–•                 'action' => $action,
     63â–•                 'user_id' => $userId,

  1   app/Models/KidsModeAuditLog.php:59
  2   tests/Unit/KidsModeAuditLogTest.php:87

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it handles databaseâ€¦   TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:59
     55â–•                 'created_at' => now()->toISOString(),
     56â–•                 'updated_at' => now()->toISOString()
     57â–•             ];
     58â–• 
  âžœ  59â–•             $supabase->from('kids_mode_audit_logs')->insert($logData);
     60â–•             
     61â–•             Log::info('Kids mode audit log created', [
     62â–•                 'action' => $action,
     63â–•                 'user_id' => $userId,

  1   app/Models/KidsModeAuditLog.php:59
  2   tests/Unit/KidsModeAuditLogTest.php:120

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it can retrieve userâ€¦  TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:87
     83â–•         try {
     84â–•             $supabase = app(SupabaseClient::class);
     85â–•             // Use system-level access for audit logs
     86â–•             
  âžœ  87â–•             return $supabase->from('kids_mode_audit_logs')
     88â–•                 ->select('*')
     89â–•                 ->eq('user_id', $userId)
     90â–•                 ->order('created_at', 'desc')
     91â–•                 ->limit($limit)

  1   app/Models/KidsModeAuditLog.php:87
  2   tests/Unit/KidsModeAuditLogTest.php:169

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it can count recentâ€¦   TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:113
    109â–•             // Use system-level access for audit logs
    110â–•             
    111â–•             $since = Carbon::now()->subMinutes($minutes)->toISOString();
    112â–•             
  âžœ 113â–•             $logs = $supabase->from('kids_mode_audit_logs')
    114â–•                 ->select('id')
    115â–•                 ->eq('user_id', $userId)
    116â–•                 ->eq('action', 'pin_failed')
    117â–•                 ->gte('created_at', $since)

  1   app/Models/KidsModeAuditLog.php:113
  2   tests/Unit/KidsModeAuditLogTest.php:193

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it can count failedâ€¦   TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:141
    137â–•             // Use system-level access for audit logs
    138â–•             
    139â–•             $since = Carbon::now()->subMinutes($minutes)->toISOString();
    140â–•             
  âžœ 141â–•             $logs = $supabase->from('kids_mode_audit_logs')
    142â–•                 ->select('id')
    143â–•                 ->eq('ip_address', $ipAddress)
    144â–•                 ->eq('action', 'pin_failed')
    145â–•                 ->gte('created_at', $since)

  1   app/Models/KidsModeAuditLog.php:141
  2   tests/Unit/KidsModeAuditLogTest.php:215

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it handles query errâ€¦  TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:87
     83â–•         try {
     84â–•             $supabase = app(SupabaseClient::class);
     85â–•             // Use system-level access for audit logs
     86â–•             
  âžœ  87â–•             return $supabase->from('kids_mode_audit_logs')
     88â–•                 ->select('*')
     89â–•                 ->eq('user_id', $userId)
     90â–•                 ->order('created_at', 'desc')
     91â–•                 ->limit($limit)

  1   app/Models/KidsModeAuditLog.php:87
  2   tests/Unit/KidsModeAuditLogTest.php:239

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it validates time raâ€¦  TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:113
    109â–•             // Use system-level access for audit logs
    110â–•             
    111â–•             $since = Carbon::now()->subMinutes($minutes)->toISOString();
    112â–•             
  âžœ 113â–•             $logs = $supabase->from('kids_mode_audit_logs')
    114â–•                 ->select('id')
    115â–•                 ->eq('user_id', $userId)
    116â–•                 ->eq('action', 'pin_failed')
    117â–•                 ->gte('created_at', $since)

  1   app/Models/KidsModeAuditLog.php:113
  2   tests/Unit/KidsModeAuditLogTest.php:265

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\KidsModeAuditLogTest > it properly encodesâ€¦   TypeError   
  Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at app/Models/KidsModeAuditLog.php:59
     55â–•                 'created_at' => now()->toISOString(),
     56â–•                 'updated_at' => now()->toISOString()
     57â–•             ];
     58â–• 
  âžœ  59â–•             $supabase->from('kids_mode_audit_logs')->insert($logData);
     60â–•             
     61â–•             Log::info('Kids mode audit log created', [
     62â–•                 'action' => $action,
     63â–•                 'user_id' => $userId,

  1   app/Models/KidsModeAuditLog.php:59
  2   tests/Unit/KidsModeAuditLogTest.php:296

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > parent dashâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "sessions" already exists (Connection: pgsql, SQL: create table "sessions" ("id" varchar(255) not null, "user_id" bigint null, "ip_address" varchar(45) null, "user_agent" text null, "payload" text not null, "last_activity" integer not null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/0001_01_01_000000_create_users_table.php:30
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > parent dashâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > can enter kâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > cannot enteâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > cannot enteâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > kids mode eâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > kids mode iâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > kids mode iâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > navigationâ€¦   QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > can exit kiâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > cannot exitâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > pin exit scâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > cannot acceâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeEnterExitTest > can accessâ€¦   QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeEnterExitTest.php:23

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeIntegrationTest > it enforces rate limitingâ€¦   
  Expected response status code [422] but received 400.
Failed asserting that 400 is identical to 422.

  at tests/Feature/KidsModeIntegrationTest.php:83
     79â–•             ]);
     80â–•             
     81â–•             // First 4 should fail with validation error, 5th should trigger lockout
     82â–•             if ($i < 4) {
  âžœ  83â–•                 $response->assertStatus(422);
     84â–•             } else {
     85â–•                 $response->assertStatus(429); // Too many requests
     86â–•             }
     87â–•         }

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeIntegrationTest > it allows safe routes inâ€¦    
  Route /locale/translations should be accessible in kids mode
Failed asserting that 404 matches expected 200.

  at tests/Feature/KidsModeIntegrationTest.php:174
    170â–•         ];
    171â–•         
    172â–•         foreach ($allowedRoutes as $route => $expectedStatus) {
    173â–•             $response = $this->get($route);
  âžœ 174â–•             $this->assertEquals($expectedStatus, $response->getStatusCode(), 
    175â–•                 "Route {$route} should be accessible in kids mode");
    176â–•         }
    177â–•     }
    178â–•

  1   tests/Feature/KidsModeIntegrationTest.php:174

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeIntegrationTest > itâ€¦  InvalidCountException   
  Method logEvent('enter', 'test-user-123', 1, '127.0.0.1', <Any>, <Any>) from Mockery_4_App_Models_KidsModeAuditLog should be called
 exactly 1 times but called 0 times.

  at tests/Feature/KidsModeIntegrationTest.php:296
    292â–• 
    293â–•     protected function tearDown(): void
    294â–•     {
    295â–•         Session::flush();
  âžœ 296â–•         parent::tearDown();
    297â–•     }
    298â–• }

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeIntegrationTest > it provides proper errorâ€¦    
  Expected response status code [401] but received 302.
Failed asserting that 302 is identical to 401.

  at tests/Feature/KidsModeIntegrationTest.php:289
    285â–•             'pin' => '1234',
    286â–•             'pin_confirmation' => '1234'
    287â–•         ]);
    288â–•         
  âžœ 289â–•         $response->assertStatus(401);
    290â–•         $response->assertJson(['error' => __('Authentication required')]);
    291â–•     }
    292â–• 
    293â–•     protected function tearDown(): void

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeMiddlewareTest > kids mode middleware blockâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 200.
Failed asserting that false is true.

  at tests/Feature/KidsModeMiddlewareTest.php:94
     90â–•         // Act: Try to access parent dashboard (matches blocked pattern)
     91â–•         $response = $this->get('/dashboard/parent');
     92â–• 
     93â–•         // Assert: Should redirect to child today page
  âžœ  94â–•         $response->assertRedirect();
     95â–•         $response->assertSessionHas('error', 'Access denied in kids mode');
     96â–•     }
     97â–• 
     98â–•     public function test_kids_mode_middleware_handles_htmx_requests(): void

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeMiddlewareTest > kids mode middleware handlâ€¦   
  Expected response status code [403] but received 200.
Failed asserting that 200 is identical to 403.

  at tests/Feature/KidsModeMiddlewareTest.php:115
    111â–•             'HX-Request' => 'true',
    112â–•         ]);
    113â–• 
    114â–•         // Assert: Should return JSON error with redirect header
  âžœ 115â–•         $response->assertStatus(403);
    116â–•         $response->assertJson([
    117â–•             'error' => 'Access denied in kids mode',
    118â–•         ]);
    119â–•         $response->assertHeader('HX-Redirect');

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeMiddlewareTest > kids mode middleware blockâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 200.
Failed asserting that false is true.

  at tests/Feature/KidsModeMiddlewareTest.php:246
    242â–•         Session::put('kids_mode_active', true);
    243â–•         Session::put('kids_mode_child_id', 123);
    244â–• 
    245â–•         // Act & Assert: Should block routes with action keywords
  âžœ 246â–•         $this->get('/test/subjects/create')->assertRedirect();
    247â–•         $this->get('/test/units/123/edit')->assertRedirect();
    248â–•         $this->post('/test/topics/store')->assertRedirect();
    249â–•         $this->delete('/test/children/456/destroy')->assertRedirect();
    250â–•     }

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeMiddlewareTest > kids mode middleware blockâ€¦   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 200.
Failed asserting that false is true.

  at tests/Feature/KidsModeMiddlewareTest.php:313
    309â–•         Session::put('kids_mode_active', true);
    310â–•         Session::put('kids_mode_child_id', 123);
    311â–• 
    312â–•         // Act & Assert: Should block all these parent-only routes
  âžœ 313â–•         $this->get('/test/dashboard/parent')->assertRedirect();
    314â–•         $this->get('/test/children/create')->assertRedirect();
    315â–•         $this->get('/test/planning/index')->assertRedirect();
    316â–•         $this->get('/test/calendar/import')->assertRedirect();
    317â–•         $this->get('/test/kids-mode/settings/pin')->assertRedirect();

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it displays pin settings page câ€¦   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned in /Users/leonidbugaev/go/src/learning-app/vendor/mockery/mockery/library/Mockery/Loader/EvalLoader.php(30) : eval()'d code:1059
Stack trace:
#0 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(181): Mockery_0_App_Services_SupabaseClient->from('user_preference...')
#1 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(32): App\Http\Middleware\SetLocale->determineLocale(Object(Illuminate\Http\Request))
#2 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): App\Http\Middleware\SetLocale->handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#5 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#6 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle(Object(Illuminate\Http\Request), Object(Closure))
#7 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#9 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest(Object(Illuminate\Http\Request), Object(Illuminate\Session\Store), Object(Closure))
#11 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#14 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#19 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#20 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#21 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#22 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#23 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#43 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#44 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#45 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call('GET', 'http://localhos...', Array, Array, Array, Array)
#46 /Users/leonidbugaev/go/src/learning-app/tests/Feature/KidsModePinUITest.php(52): Illuminate\Foundation\Testing\TestCase->get('http://localhos...')
#47 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\KidsModePinUITest->it_displays_pin_settings_page_correctly_when_no_pin_is_set()
#48 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#49 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#50 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KidsModePinUITest))
#51 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#52 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#54 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#55 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#56 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#57 {main}

----------------------------------------------------------------------------------

Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at tests/Feature/KidsModePinUITest.php:54
     50â–•         });
     51â–• 
     52â–•         $response = $this->get(route('kids-mode.settings'));
     53â–• 
  âžœ  54â–•         $response->assertStatus(200);
     55â–•         $response->assertSee(__('kids_mode_settings'));
     56â–•         $response->assertSee(__('pin_not_set'));
     57â–•         $response->assertSee(__('set_kids_mode_pin'));
     58â–•         $response->assertDontSee(__('reset_pin'));

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it displays pin settings page câ€¦   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned in /Users/leonidbugaev/go/src/learning-app/vendor/mockery/mockery/library/Mockery/Loader/EvalLoader.php(30) : eval()'d code:1059
Stack trace:
#0 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(181): Mockery_0_App_Services_SupabaseClient->from('user_preference...')
#1 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(32): App\Http\Middleware\SetLocale->determineLocale(Object(Illuminate\Http\Request))
#2 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): App\Http\Middleware\SetLocale->handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#5 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#6 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle(Object(Illuminate\Http\Request), Object(Closure))
#7 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#9 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest(Object(Illuminate\Http\Request), Object(Illuminate\Session\Store), Object(Closure))
#11 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#14 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#19 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#20 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#21 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#22 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#23 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#43 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#44 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#45 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call('GET', 'http://localhos...', Array, Array, Array, Array)
#46 /Users/leonidbugaev/go/src/learning-app/tests/Feature/KidsModePinUITest.php(85): Illuminate\Foundation\Testing\TestCase->get('http://localhos...')
#47 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\KidsModePinUITest->it_displays_pin_settings_page_correctly_when_pin_is_set()
#48 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#49 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#50 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KidsModePinUITest))
#51 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#52 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#54 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#55 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#56 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#57 {main}

----------------------------------------------------------------------------------

Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at tests/Feature/KidsModePinUITest.php:87
     83â–•         });
     84â–• 
     85â–•         $response = $this->get(route('kids-mode.settings'));
     86â–• 
  âžœ  87â–•         $response->assertStatus(200);
     88â–•         $response->assertSee(__('kids_mode_settings'));
     89â–•         $response->assertSee(__('pin_is_set'));
     90â–•         $response->assertSee(__('update_kids_mode_pin'));
     91â–•         $response->assertSee(__('reset_pin'));

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it can set new pin with valid dâ€¦   
  Expected response status code [302] but received 500.
Failed asserting that 500 is identical to 302.

The following exception occurred during the last request:

TypeError: Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned in /Users/leonidbugaev/go/src/learning-app/vendor/mockery/mockery/library/Mockery/Loader/EvalLoader.php(30) : eval()'d code:1059
Stack trace:
#0 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(181): Mockery_0_App_Services_SupabaseClient->from('user_preference...')
#1 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(32): App\Http\Middleware\SetLocale->determineLocale(Object(Illuminate\Http\Request))
#2 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): App\Http\Middleware\SetLocale->handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#5 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#6 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle(Object(Illuminate\Http\Request), Object(Closure))
#7 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#9 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest(Object(Illuminate\Http\Request), Object(Illuminate\Session\Store), Object(Closure))
#11 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#14 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#19 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#20 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#21 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#22 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#23 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#43 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#44 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#45 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(397): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
#46 /Users/leonidbugaev/go/src/learning-app/tests/Feature/KidsModePinUITest.php(123): Illuminate\Foundation\Testing\TestCase->post('http://localhos...', Array)
#47 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\KidsModePinUITest->it_can_set_new_pin_with_valid_data()
#48 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#49 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#50 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KidsModePinUITest))
#51 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#52 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#54 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#55 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#56 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#57 {main}

----------------------------------------------------------------------------------

Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at tests/Feature/KidsModePinUITest.php:128
    124â–•             'pin' => '1234',
    125â–•             'pin_confirmation' => '1234',
    126â–•         ]);
    127â–• 
  âžœ 128â–•         $response->assertStatus(302);
    129â–•         $response->assertRedirect(route('kids-mode.settings'));
    130â–•         $response->assertSessionHas('success', __('Kids mode PIN has been set successfully'));
    131â–•     }
    132â–•

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it can reset existing pin          
  Expected response status code [302] but received 500.
Failed asserting that 500 is identical to 302.

The following exception occurred during the last request:

TypeError: Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned in /Users/leonidbugaev/go/src/learning-app/vendor/mockery/mockery/library/Mockery/Loader/EvalLoader.php(30) : eval()'d code:1059
Stack trace:
#0 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(181): Mockery_0_App_Services_SupabaseClient->from('user_preference...')
#1 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(32): App\Http\Middleware\SetLocale->determineLocale(Object(Illuminate\Http\Request))
#2 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): App\Http\Middleware\SetLocale->handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#5 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#6 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle(Object(Illuminate\Http\Request), Object(Closure))
#7 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#9 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest(Object(Illuminate\Http\Request), Object(Illuminate\Session\Store), Object(Closure))
#11 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#14 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#19 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#20 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#21 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#22 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#23 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#43 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#44 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#45 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(397): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
#46 /Users/leonidbugaev/go/src/learning-app/tests/Feature/KidsModePinUITest.php(186): Illuminate\Foundation\Testing\TestCase->post('http://localhos...')
#47 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\KidsModePinUITest->it_can_reset_existing_pin()
#48 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#49 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#50 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KidsModePinUITest))
#51 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#52 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#54 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#55 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#56 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#57 {main}

----------------------------------------------------------------------------------

Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at tests/Feature/KidsModePinUITest.php:188
    184â–•         });
    185â–• 
    186â–•         $response = $this->post(route('kids-mode.pin.reset'));
    187â–• 
  âžœ 188â–•         $response->assertStatus(302);
    189â–•         $response->assertRedirect(route('kids-mode.settings'));
    190â–•         $response->assertSessionHas('success', __('Kids mode PIN has been reset successfully'));
    191â–•     }
    192â–•

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it displays exit screenâ€¦   Error   
  Call to undefined method App\Models\Child::shouldReceive()

  at tests/Feature/KidsModePinUITest.php:205
    201â–•         $this->mock(\App\Services\SupabaseClient::class, function ($mock) {
    202â–•             $mock->shouldReceive('setUserToken')->once();
    203â–•             
    204â–•             // Mock child lookup
  âžœ 205â–•             \App\Models\Child::shouldReceive('find')
    206â–•                 ->with(1, \Mockery::type(\App\Services\SupabaseClient::class))
    207â–•                 ->andReturn((object) [
    208â–•                     'id' => 1,
    209â–•                     'name' => 'Test Child',

  1   tests/Feature/KidsModePinUITest.php:205
  2   tests/Feature/KidsModePinUITest.php:201

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it displays exit screenâ€¦   Error   
  Call to undefined method App\Models\Child::shouldReceive()

  at tests/Feature/KidsModePinUITest.php:252
    248â–•         $this->mock(\App\Services\SupabaseClient::class, function ($mock) {
    249â–•             $mock->shouldReceive('setUserToken')->once();
    250â–•             
    251â–•             // Mock child lookup
  âžœ 252â–•             \App\Models\Child::shouldReceive('find')
    253â–•                 ->with(1, \Mockery::type(\App\Services\SupabaseClient::class))
    254â–•                 ->andReturn((object) [
    255â–•                     'id' => 1,
    256â–•                     'name' => 'Test Child',

  1   tests/Feature/KidsModePinUITest.php:252
  2   tests/Feature/KidsModePinUITest.php:248

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it displays lockout messâ€¦  Error   
  Call to undefined method App\Models\Child::shouldReceive()

  at tests/Feature/KidsModePinUITest.php:302
    298â–•         $this->mock(\App\Services\SupabaseClient::class, function ($mock) use ($lockoutTime) {
    299â–•             $mock->shouldReceive('setUserToken')->once();
    300â–•             
    301â–•             // Mock child lookup
  âžœ 302â–•             \App\Models\Child::shouldReceive('find')
    303â–•                 ->with(1, \Mockery::type(\App\Services\SupabaseClient::class))
    304â–•                 ->andReturn((object) [
    305â–•                     'id' => 1,
    306â–•                     'name' => 'Test Child',

  1   tests/Feature/KidsModePinUITest.php:302
  2   tests/Feature/KidsModePinUITest.php:298

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it shows attempts remainâ€¦  Error   
  Call to undefined method App\Models\Child::shouldReceive()

  at tests/Feature/KidsModePinUITest.php:349
    345â–•         $this->mock(\App\Services\SupabaseClient::class, function ($mock) {
    346â–•             $mock->shouldReceive('setUserToken')->once();
    347â–•             
    348â–•             // Mock child lookup
  âžœ 349â–•             \App\Models\Child::shouldReceive('find')
    350â–•                 ->with(1, \Mockery::type(\App\Services\SupabaseClient::class))
    351â–•                 ->andReturn((object) [
    352â–•                     'id' => 1,
    353â–•                     'name' => 'Test Child',

  1   tests/Feature/KidsModePinUITest.php:349
  2   tests/Feature/KidsModePinUITest.php:345

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it validates pin submission forâ€¦   
  Expected response status code [422] but received 400.
Failed asserting that 400 is identical to 422.

  at tests/Feature/KidsModePinUITest.php:406
    402â–•         $response = $this->postJson(route('kids-mode.exit.validate'), [
    403â–•             'pin' => '12a4', // Invalid: contains letter
    404â–•         ]);
    405â–• 
  âžœ 406â–•         $response->assertStatus(422);
    407â–•         $response->assertJsonValidationErrors('pin');
    408â–•     }
    409â–• 
    410â–•     /** @test */

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > it requires authentication forâ€¦    
  Expected response status code [401] but received 302.
Failed asserting that 302 is identical to 401.

  at tests/Feature/KidsModePinUITest.php:423
    419â–•         $response = $this->post(route('kids-mode.pin.update'), [
    420â–•             'pin' => '1234',
    421â–•             'pin_confirmation' => '1234',
    422â–•         ]);
  âžœ 423â–•         $response->assertStatus(401);
    424â–• 
    425â–•         $response = $this->post(route('kids-mode.pin.reset'));
    426â–•         $response->assertStatus(401);
    427â–•     }

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > pin settings form includes requâ€¦   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned in /Users/leonidbugaev/go/src/learning-app/vendor/mockery/mockery/library/Mockery/Loader/EvalLoader.php(30) : eval()'d code:1059
Stack trace:
#0 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(181): Mockery_0_App_Services_SupabaseClient->from('user_preference...')
#1 /Users/leonidbugaev/go/src/learning-app/app/Http/Middleware/SetLocale.php(32): App\Http\Middleware\SetLocale->determineLocale(Object(Illuminate\Http\Request))
#2 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): App\Http\Middleware\SetLocale->handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#5 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#6 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle(Object(Illuminate\Http\Request), Object(Closure))
#7 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#9 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest(Object(Illuminate\Http\Request), Object(Illuminate\Session\Store), Object(Closure))
#11 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#12 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#13 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#14 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#19 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#20 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#21 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#22 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#23 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#24 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#36 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#38 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#43 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#44 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#45 /Users/leonidbugaev/go/src/learning-app/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call('GET', 'http://localhos...', Array, Array, Array, Array)
#46 /Users/leonidbugaev/go/src/learning-app/tests/Feature/KidsModePinUITest.php(462): Illuminate\Foundation\Testing\TestCase->get('http://localhos...')
#47 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\KidsModePinUITest->pin_settings_form_includes_required_elements()
#48 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#49 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#50 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KidsModePinUITest))
#51 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#52 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#53 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#54 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#55 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#56 /Users/leonidbugaev/go/src/learning-app/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#57 {main}

----------------------------------------------------------------------------------

Mockery_0_App_Services_SupabaseClient::from(): Return value must be of type App\Services\SupabaseQueryBuilder, Mockery_0_App_Services_SupabaseClient returned

  at tests/Feature/KidsModePinUITest.php:464
    460â–•         });
    461â–• 
    462â–•         $response = $this->get(route('kids-mode.settings'));
    463â–• 
  âžœ 464â–•         $response->assertStatus(200);
    465â–•         
    466â–•         // Check for form elements
    467â–•         $response->assertSee('name="pin"', false);
    468â–•         $response->assertSee('name="pin_confirmation"', false);

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModePinUITest > exit screen includes reqâ€¦  Error   
  Call to undefined method App\Models\Child::shouldReceive()

  at tests/Feature/KidsModePinUITest.php:491
    487â–•         // Mock child data and PIN check
    488â–•         $this->mock(\App\Services\SupabaseClient::class, function ($mock) {
    489â–•             $mock->shouldReceive('setUserToken')->once();
    490â–•             
  âžœ 491â–•             \App\Models\Child::shouldReceive('find')
    492â–•                 ->with(1, \Mockery::type(\App\Services\SupabaseClient::class))
    493â–•                 ->andReturn((object) [
    494â–•                     'id' => 1,
    495â–•                     'name' => 'Test Child',

  1   tests/Feature/KidsModePinUITest.php:491
  2   tests/Feature/KidsModePinUITest.php:488

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it logs kidsâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it validatesâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it blocks reâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it implementâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it implementâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it applies sâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it does notâ€¦   QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it tracks auâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it clears raâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it preventsâ€¦   QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeSecurityTest > it validatesâ€¦  QueryException   
  SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "subjects" does not exist (Connection: pgsql, SQL: alter table "subjects" add column "child_id" integer null)

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
    820â–•                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821â–•                 );
    822â–•             }
    823â–• 
  âžœ 824â–•             throw new QueryException(
    825â–•                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826â–•             );
    827â–•         }
    828â–•     }

      [2m+10 vendor frames [22m
  11  database/migrations/2025_09_05_200528_add_child_id_to_subjects_table.php:14
      [2m+38 vendor frames [22m
  50  tests/Feature/KidsModeSecurityTest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeUITest > child todayâ€¦  NotFoundHttpException   
  GET http://localhost:8000/dashboard/child-today/1

  at vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php:574
    570â–•      * @return \Symfony\Component\HttpFoundation\Response
    571â–•      */
    572â–•     protected function renderException($request, Throwable $e)
    573â–•     {
  âžœ 574â–•         return $this->app[ExceptionHandler::class]->render($request, $e);
    575â–•     }
    576â–• 
    577â–•     /**
    578â–•      * Get the application's global middleware.

      [2m+48 vendor frames [22m
  49  tests/Feature/KidsModeUITest.php:26

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeUITest > kids mode indicator renders when aâ€¦   
  Expected: <div class="fixed top-4 right-4 z-50 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg shadow-lg p-4 animate-pulse" \n
           data-testid="kids-mode-indicator">\n
          <div class="flex items-center space-x-3">\n
  ... (31 more lines)

  To contain: kids_mode_active

  at tests/Feature/KidsModeUITest.php:57
     53â–•         $html = $component->render();
     54â–• 
     55â–•         $this->assertStringContainsString('kids-mode-indicator', $html);
     56â–•         $this->assertStringContainsString('Test Child', $html);
  âžœ  57â–•         $this->assertStringContainsString('kids_mode_active', $html);
     58â–•     }
     59â–• 
     60â–•     public function test_kids_mode_indicator_hidden_when_inactive()
     61â–•     {

  1   tests/Feature/KidsModeUITest.php:57

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeUITest > kids mode css classes are applied     
  Expected: <!DOCTYPE html>\n
  <html lang="en">\n
    <head>\n
  ... (888 more lines)

  To contain: Today's Adventures!

  at tests/Feature/KidsModeUITest.php:113
    109â–• 
    110â–•         // Check for kids mode styling
    111â–•         $this->assertStringContainsString('bg-gradient-to-r from-pink-500', $html);
    112â–•         $this->assertStringContainsString('Hello, Test Child!', $html);
  âžœ 113â–•         $this->assertStringContainsString('Today\'s Adventures!', $html);
    114â–•         $this->assertStringContainsString('Adventures Today', $html);
    115â–•     }
    116â–• 
    117â–•     public function test_regular_mode_css_classes_are_applied()

  1   tests/Feature/KidsModeUITest.php:113

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\KidsModeUITest > regular mode css classes are appliâ€¦   
  Expected: <!DOCTYPE html>\n
  <html lang="en">\n
    <head>\n
  ... (816 more lines)

  To contain: Test Child's Learning Today

  at tests/Feature/KidsModeUITest.php:146
    142â–• 
    143â–•         // Check for regular mode styling
    144â–•         $this->assertStringContainsString('bg-gradient-to-r from-blue-500 to-purple-600', $html);
    145â–•         $this->assertStringNotContainsString('Hello, Test Child!', $html);
  âžœ 146â–•         $this->assertStringContainsString('Test Child\'s Learning Today', $html);
    147â–•         $this->assertStringContainsString('Today\'s Sessions', $html);
    148â–•     }
    149â–• 
    150â–•     public function test_kids_mode_javascript_variables_are_set_correctly()

  1   tests/Feature/KidsModeUITest.php:146


  Tests:    58 failed, 89 passed (427 assertions)
  Duration: 18.64s

